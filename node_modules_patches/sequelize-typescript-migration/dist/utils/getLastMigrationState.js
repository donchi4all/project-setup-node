'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

async function getLastMigrationState(sequelize) {
  const [lastExecutedMigration,] = await sequelize.query(
    'SELECT revision FROM SequelizeMeta ORDER BY revision DESC LIMIT 1',
    { type: 'SELECT' }
  );

  const lastRevision = lastExecutedMigration !== undefined
    ? lastExecutedMigration['revision']
    : -1;

  const [lastMigration,] = await sequelize.query(
    `SELECT state FROM SequelizeMetaMigrations WHERE revision = ${lastRevision}`,
    { type: 'SELECT' }
  );

  return lastMigration ? lastMigration['state'] : undefined;
}

exports.default = getLastMigrationState;
//# sourceMappingURL=getLastMigrationState.js.map