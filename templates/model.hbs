import {
    Table,
    PrimaryKey,
    Column,
    Model,
    AllowNull,
    CreatedAt,
    UpdatedAt,
    DataType,
    Unique,
    Default,
    DeletedAt
} from 'sequelize-typescript';

import I{{capitalizeSingular service}}Interface, { 
    {{capitalizeSingular service}}CreationType 
} from "./I{{capitalizeSingular service}}";

/**
 * {{capitalizePlural service}} Model
 *
 * Represents the {{plural service}} table in the database.
 * - Primary key is UUID
 * - Supports soft deletes (paranoid)
 * - Tracks creation and update timestamps automatically
 */
@Table({
    tableName: '{{plural service}}',
    timestamps: true,   // Enables createdAt & updatedAt
    paranoid: true      // Enables deletedAt (soft delete)
})
export class {{capitalizeSingular service}} extends Model<
    I{{capitalizeSingular service}}Interface,
    {{capitalizeSingular service}}CreationType
> {

    /**
     * Primary identifier (UUID)
     */
    @PrimaryKey
    @Column({
        type: DataType.UUID,
        defaultValue: DataType.UUIDV4,
    })
    id!: I{{capitalizeSingular service}}Interface['id'];

    /**
     * Unique name for the {{singular service}}
     */
    @Unique(true)
    @AllowNull(false)
    @Column(DataType.STRING)
    name!: I{{capitalizeSingular service}}Interface['name'];

    /**
     * Optional additional string field
     */
    @Column(DataType.STRING)
    someOtherString!: I{{capitalizeSingular service}}Interface['someOtherString'];

    /**
     * Reference to the user who created this {{singular service}}
     */
    @AllowNull(false)
    @Column(DataType.UUID)
    createdBy!: I{{capitalizeSingular service}}Interface['createdBy'];

    /**
     * Soft delete timestamp
     * Automatically handled by Sequelize paranoid mode
     */
    @Default(null)
    @DeletedAt
    @Column(DataType.DATE)
    deletedAt!: I{{capitalizeSingular service}}Interface['deletedAt'];

    /**
     * Timestamp for when record was created
     */
    @CreatedAt
    @Column({
        type: DataType.DATE,
        defaultValue: DataType.NOW,
    })
    createdAt!: I{{capitalizeSingular service}}Interface['createdAt'];

    /**
     * Timestamp for when record was last updated
     */
    @UpdatedAt
    @Column({
        type: DataType.DATE,
        defaultValue: DataType.NOW,
    })
    updatedAt!: I{{capitalizeSingular service}}Interface['updatedAt'];
}